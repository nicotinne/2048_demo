{"version":3,"sources":["../../../../../assets/Script/Handle/assets/Script/Handle/leaderBoardHandle.js"],"names":["User","require","emitter","cc","Class","extends","Component","properties","parent","Layout","prefab","Prefab","btnClose","Button","onLoad","start","_renderAll","node","on","onClick","instance","emit","log","data","JSON","parse","sys","localStorage","getItem","arr","sortData","forEach","user","index","item","_createItem","checkTop","getChildByName","getComponent","string","color","sort","a","b","score","instantiate","name"],"mappings":"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","file":"leaderBoardHandle.js","sourceRoot":"../../../../../assets/Script/Handle","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\nconst User = require(\"User\");\nconst emitter = require(\"mEmitter\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        parent: cc.Layout,\n        prefab: cc.Prefab,\n        btnClose: cc.Button,\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        \n    },\n\n    start () {\n        this._renderAll();\n\n        this.btnClose.node.on(\"click\", this.onClick, this);\n    },\n\n    onClick() {\n        \n            emitter.instance.emit(\"CLOSE_LEADERBOARD\");\n            cc.log(\"close leader board\");\n    },\n\n    _renderAll() {\n        // this.sortData();\n        // this.users.forEach((user, index) => {\n        //     let item = this._createItem(user, index);\n        //     this.checkTop(item);\n        // });\n        // cc.log(this.users);\n\n        let data = JSON.parse(cc.sys.localStorage.getItem(\"users\"));\n        if (data != null) {\n            let arr = this.sortData(data);\n            arr.forEach((user, index) => {\n                let item = this._createItem(user, index);\n                this.checkTop(item);\n            })\n        }\n    },\n\n    checkTop(item) {\n        if(item.getChildByName(\"rank\").getComponent(\"cc.Label\").string == 1) {\n            item.color = new cc.color(\"#00000\");\n        }\n        if(item.getChildByName(\"rank\").getComponent(\"cc.Label\").string == 2) {\n            item.color = new cc.color(\"#5C5757\");\n        }\n        if(item.getChildByName(\"rank\").getComponent(\"cc.Label\").string == 3) {\n            item.color = new cc.color(\"#D1D1D1\");\n        }\n    },\n\n    sortData(arr) {\n        arr = arr.sort((a, b) => {\n            return b.score - a.score;\n        })\n        return arr;\n    },\n\n    _createItem(user, index) {\n        let item = cc.instantiate(this.prefab);\n        item.parent = this.parent.node;\n        // cc.log(item.getChildByName(\"rank\").getComponent(\"cc.Label\").string = \"aaa\");\n        item.getChildByName(\"rank\").getComponent(\"cc.Label\").string = index + 1;\n        item.getChildByName(\"name\").getComponent(\"cc.Label\").string = user.name;\n        item.getChildByName(\"score\").getComponent(\"cc.Label\").string = user.score;\n        return item;\n    },\n\n    \n\n    // update (dt) {},\n});\n"]}